backend:
  name: github
  repo: adkeb/blog
  branch: main
  base_url: https://decap-github-oauth.xuyang020128.workers.dev
  auth_endpoint: auth

site_url: https://www.xuyangfly.site
display_url: https://www.xuyangfly.site
logo_url: /favicon.svg

media_folder: public/uploads
public_folder: /uploads
locale: zh_Hans

collections:
  - name: posts
    label: 文章
    folder: content/posts
    create: true
    extension: md
    format: frontmatter
    slug: "{{slug}}"
    summary: "{{title}} - {{date}}"
    fields:
      - { label: 标题, name: title, widget: string }
      - { label: 路由标识, name: slug, widget: string, hint: "用于 /posts/:slug，建议英文短词" }
      - { label: 摘要, name: description, widget: text }
      - { label: 发布日期, name: date, widget: datetime, format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
      - { label: 更新日期, name: updated, widget: datetime, required: false, format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
      - { label: 标签, name: tags, widget: list, field: { label: 标签, name: tag, widget: string } }
      - { label: 分类, name: category, widget: string, default: General }
      - { label: 封面, name: cover, widget: image, required: false }
      - { label: 草稿, name: draft, widget: boolean, default: false }
      - { label: 显示目录, name: toc, widget: boolean, default: true }
      - { label: 语言, name: lang, widget: string, default: zh-CN }
      - label: 正文
        name: body
        widget: markdown
        hint: "若富文本中图片/代码块无法删除，请切换右上角 Markdown 模式直接删除对应块。"
        modes: [raw, rich_text]
  - name: chapters
    label: 章节
    folder: content/chapters
    create: true
    extension: md
    format: frontmatter
    slug: "{{slug}}"
    summary: "章节｜{{title}} - {{date}}"
    fields:
      - { label: 章节标题, name: title, widget: string }
      - { label: 章节标识, name: slug, widget: string, hint: "用于 /chapters/:chapterSlug，建议英文短词" }
      - { label: 摘要, name: description, widget: text }
      - { label: 发布日期, name: date, widget: datetime, format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
      - { label: 更新日期, name: updated, widget: datetime, required: false, format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
      - { label: 标签, name: tags, widget: list, field: { label: 标签, name: tag, widget: string } }
      - { label: 分类, name: category, widget: string, default: Chapter }
      - { label: 封面, name: cover, widget: image, required: false }
      - { label: 草稿, name: draft, widget: boolean, default: false }
      - { label: 显示目录, name: toc, widget: boolean, default: true }
      - { label: 语言, name: lang, widget: string, default: zh-CN }
      - label: 正文
        name: body
        widget: markdown
        modes: [raw, rich_text]
        default: |
          这是章节导读。
          
          ::chapter-children
          ::
  - name: chapter_posts
    label: 章节子文章
    folder: content/chapter-posts
    create: true
    extension: md
    format: frontmatter
    slug: "{{slug}}"
    path: "{{chapterSlug}}/{{slug}}"
    nested:
      depth: 2
      subfolders: false
      summary: "{{title}}"
    summary: "子文章｜{{chapterSlug}} / {{title}} (第{{order}}节)"
    fields:
      - { label: 标题, name: title, widget: string }
      - { label: 路由标识, name: slug, widget: string, hint: "用于 /chapters/:chapterSlug/:slug" }
      - {
          label: 所属主章节,
          name: chapterSlug,
          widget: relation,
          collection: chapters,
          search_fields: [title, slug],
          value_field: slug,
          display_fields: [title, slug],
          hint: "子文章必须绑定一个章节；保存后文件会落到 content/chapter-posts/<chapterSlug>/ 目录下。"
        }
      - { label: 章节内序号, name: order, widget: number, value_type: int, min: 1, default: 1 }
      - { label: 摘要, name: description, widget: text }
      - { label: 发布日期, name: date, widget: datetime, format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
      - { label: 更新日期, name: updated, widget: datetime, required: false, format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
      - { label: 标签, name: tags, widget: list, field: { label: 标签, name: tag, widget: string } }
      - { label: 分类, name: category, widget: string, default: General }
      - { label: 封面, name: cover, widget: image, required: false }
      - { label: 草稿, name: draft, widget: boolean, default: false }
      - { label: 显示目录, name: toc, widget: boolean, default: true }
      - { label: 语言, name: lang, widget: string, default: zh-CN }
      - {
          label: 旧路由兼容 Slugs,
          name: legacySlugs,
          widget: list,
          required: false,
          hint: "用于 /posts/:slug 的 301 兼容，例如 old-post-slug"
        }
      - label: 正文
        name: body
        widget: markdown
        modes: [raw, rich_text]
  - name: apps
    label: 应用中心
    folder: content/apps
    create: true
    extension: md
    format: frontmatter
    slug: "{{slug}}"
    summary: "应用｜{{title}} - {{status}}"
    fields:
      - { label: 应用名称, name: title, widget: string }
      - { label: 应用标识, name: slug, widget: string, hint: "建议英文短词，用于内部识别" }
      - { label: 描述, name: description, widget: text }
      - { label: 直达链接, name: url, widget: string, hint: "例如 https://tts.xuyangfly.site" }
      - { label: 发布日期, name: date, widget: datetime, format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
      - { label: 更新日期, name: updated, widget: datetime, required: false, format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
      - { label: 标签, name: tags, widget: list, field: { label: 标签, name: tag, widget: string }, required: false }
      - { label: 分类, name: category, widget: string, default: Application }
      - {
          label: 状态,
          name: status,
          widget: select,
          options:
            - { label: 在线, value: online }
            - { label: 私有, value: private }
            - { label: 离线, value: offline }
          default: online
        }
      - { label: 排序序号, name: order, widget: number, value_type: int, default: 100, min: 1 }
      - { label: 封面, name: cover, widget: image, required: false }
      - { label: 草稿, name: draft, widget: boolean, default: false }
      - { label: 语言, name: lang, widget: string, default: zh-CN }
      - label: 备注
        name: body
        widget: markdown
        required: false
        modes: [raw, rich_text]
